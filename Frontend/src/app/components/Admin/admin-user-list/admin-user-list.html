<div class="admin-user-list">
  <div class="container">
    <!-- Header Section -->
    <div class="header-section">
      <div class="header-content">
        <h1 class="page-title">
          <i class="fas fa-users-cog"></i>
          User Management
        </h1>
        <p class="page-subtitle">Manage all users on the platform</p>
      </div>
      <div class="header-actions">
        <a routerLink="/admin/users/create" class="btn btn-primary">
          <i class="fas fa-user-plus"></i>
          Create New User
        </a>
      </div>
    </div>

    <!-- Statistics Cards -->
    <div class="stats-section">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">{{ users.length }}</h3>
            <p class="stat-label">Total Users</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon admin">
            <i class="fas fa-shield-alt"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">{{ getAdminsCount() }}</h3>
            <p class="stat-label">Admins</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon creator">
            <i class="fas fa-palette"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">{{ getCreatorsCount() }}</h3>
            <p class="stat-label">Creators</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon customer">
            <i class="fas fa-shopping-cart"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">{{ getCustomersCount() }}</h3>
            <p class="stat-label">Customers</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon active">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">{{ getActiveUsersCount() }}</h3>
            <p class="stat-label">Active Users</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon inactive">
            <i class="fas fa-times-circle"></i>
          </div>
          <div class="stat-content">
            <h3 class="stat-number">{{ getInactiveUsersCount() }}</h3>
            <p class="stat-label">Inactive Users</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Filters and Search -->
    <div class="filters-section">
      <div class="filters-content">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input 
            type="text" 
            [(ngModel)]="searchTerm" 
            placeholder="Search users by name, email, or role..."
            class="search-input"
          >
        </div>
        <div class="filter-controls">
          <select [(ngModel)]="selectedRole" class="filter-select">
            <option value="all">All Roles</option>
            <option value="Admin">Admin</option>
            <option value="Creator">Creator</option>
            <option value="Customer">Customer</option>
          </select>
          <select [(ngModel)]="selectedStatus" class="filter-select">
            <option value="all">All Status</option>
            <option value="active">Active</option>
            <option value="inactive">Inactive</option>
          </select>
          <button (click)="loadUsers()" class="btn btn-outline">
            <i class="fas fa-sync-alt"></i>
            Refresh
          </button>
        </div>
      </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="alert alert-danger">
      <div class="alert-content">
        <i class="fas fa-exclamation-triangle"></i>
        <div class="alert-message">
          <h5>Error</h5>
          <p>{{ error }}</p>
        </div>
      </div>
      <button class="btn btn-outline-danger" (click)="retryLoad()">
        <i class="fas fa-redo"></i> Retry
      </button>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-section">
      <div class="loading-spinner">
        <i class="fas fa-spinner fa-spin"></i>
        <p>Loading users...</p>
      </div>
    </div>

    <!-- Users Table -->
    <div *ngIf="!loading && !error" class="users-section">
      <div class="table-container">
        <table class="users-table">
          <thead>
            <tr>
              <th>User</th>
              <th>Email</th>
              <th>Role</th>
              <th>Status</th>
              <th>Created</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of getFilteredUsers()" class="user-row">
              <!-- User Info -->
              <td class="user-info">
                <div class="user-avatar">
                  <img *ngIf="user.profileImageUrl" [src]="user.profileImageUrl" [alt]="user.username">
                  <div *ngIf="!user.profileImageUrl" class="avatar-fallback">
                    {{ getUserInitials(user.username) }}
                  </div>
                </div>
                <div class="user-details">
                  <h4 class="user-name">{{ user.username }}</h4>
                  <p *ngIf="user.profileDescription" class="user-description">
                    {{ user.profileDescription }}
                  </p>
                </div>
              </td>

              <!-- Email -->
              <td class="user-email">
                <a [href]="'mailto:' + user.email" class="email-link">
                  {{ user.email }}
                </a>
              </td>

              <!-- Role -->
              <td class="user-role">
                <span class="role-badge" [class]="getRoleBadgeClass(user.role)">
                  <i [class]="getRoleIcon(user.role)"></i>
                  {{ user.role }}
                </span>
              </td>

              <!-- Status -->
              <td class="user-status">
                <span class="status-badge" [class]="getStatusBadgeClass(user.isActive)">
                  <i [class]="getStatusIcon(user.isActive)"></i>
                  {{ user.isActive ? 'Active' : 'Inactive' }}
                </span>
              </td>

              <!-- Created Date -->
              <td class="user-created">
                <span class="created-date">
                  {{ user.createdAt | date:'MMM dd, yyyy' }}
                </span>
              </td>

              <!-- Actions -->
              <td class="user-actions">
                <div class="action-buttons">
                  <a [routerLink]="['/admin/users', user.id]" class="btn btn-sm btn-outline" title="View Details">
                    <i class="fas fa-eye"></i>
                  </a>
                  <button 
                    (click)="toggleActivation(user)" 
                    class="btn btn-sm"
                    [class]="user.isActive ? 'btn-warning' : 'btn-success'"
                    [title]="user.isActive ? 'Deactivate User' : 'Activate User'"
                  >
                    <i [class]="user.isActive ? 'fas fa-user-slash' : 'fas fa-user-check'"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Empty State -->
        <div *ngIf="getFilteredUsers().length === 0" class="empty-state">
          <div class="empty-content">
            <i class="fas fa-users-slash"></i>
            <h3>No users found</h3>
            <p>No users match your current filters. Try adjusting your search criteria.</p>
            <button (click)="clearFilters()" class="btn btn-primary">
              Clear Filters
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
  