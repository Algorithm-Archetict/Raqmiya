<div class="product-detail-container mt-4">
    <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>
    <app-alert *ngIf="errorMessage" [message]="errorMessage" type="danger"></app-alert>
  
    <div *ngIf="!isLoading && product" class="card shadow-sm product-detail-card">
      <div class="row g-0">
        <div class="col-md-4">
          <img *ngIf="product.imageUrl; else noImage" [src]="product.imageUrl" class="img-fluid rounded-start product-image" alt="{{ product.name }}">
          <ng-template #noImage>
            <div class="product-image-placeholder bg-light d-flex align-items-center justify-content-center">
              <span>No Image</span>
            </div>
          </ng-template>
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h1 class="card-title">{{ product.name }}</h1>
            <p class="card-text text-muted">By {{ product.creatorUsername || 'Unknown Creator' }}</p>
            <hr>
            <p class="card-text product-description">{{ product.description }}</p>
            <hr>
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span class="product-price display-6 fw-bold">{{ product.price | currency:product.currency:'symbol':'1.2-2' }}</span>
              <span *ngIf="product.category" class="badge bg-primary fs-6">{{ product.category }}</span>
            </div>
  
            <div class="d-grid gap-2 mt-4">
              <button (click)="onBuyNow()" class="btn btn-lg btn-success">Buy Now</button>
              <button *ngIf="isCreator" (click)="onEditProduct()" class="btn btn-outline-primary btn-sm mt-2">Edit Product</button>
              <button *ngIf="isCreator" (click)="onDeleteProduct()" class="btn btn-outline-danger btn-sm mt-2">Delete Product</button>
            </div>
  
            <div class="mt-4 text-muted text-end">
              <small>Published: {{ product.isPublished ? 'Yes' : 'No' }}</small><br>
              <small>Created: {{ product.createdAt | date:'mediumDate' }}</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <div *ngIf="!isLoading && !product && !errorMessage" class="alert alert-warning mt-4" role="alert">
      Product not found or invalid ID.
    </div>
  
    <div class="mt-4">
      <a routerLink="/products/list" class="btn btn-secondary">&larr; Back to Products</a>
    </div>
  </div>
